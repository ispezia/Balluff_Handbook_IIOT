[{"id":"a35ac5c2.83bca8","type":"tab","label":"Handbook IIOT","disabled":false,"info":""},{"id":"1f8d397e.070a67","type":"tab","label":"Blinking led","disabled":false,"info":""},{"id":"e43f33ee.77fc6","type":"tab","label":"Multi device-gauge ","disabled":false,"info":""},{"id":"45d2621c.56598c","type":"subflow","name":"Color status Led","info":"","category":"","in":[{"x":60,"y":80,"wires":[{"id":"f9c72548.d70fc8"}]}],"out":[{"x":340,"y":80,"wires":[{"id":"f9c72548.d70fc8","port":0}]}],"env":[],"color":"#DDAA99"},{"id":"51d99cff.543894","type":"subflow","name":"Color Comm Led","info":"","category":"","in":[{"x":140,"y":40,"wires":[{"id":"690a016d.9660e"}]}],"out":[{"x":440,"y":40,"wires":[{"id":"690a016d.9660e","port":0}]},{"x":440,"y":100,"wires":[{"id":"690a016d.9660e","port":0}]}],"env":[],"color":"#DDAA99"},{"id":"67e78992.40b628","type":"subflow","name":"Color Port Led","info":"","category":"","in":[{"x":80,"y":60,"wires":[{"id":"b4cbac57.2869c"}]}],"out":[{"x":360,"y":60,"wires":[{"id":"b4cbac57.2869c","port":0}]}],"env":[],"color":"#DDAA99"},{"id":"acbb5738.a5c768","type":"ui_tab","z":"","name":"BTL","icon":"dashboard","disabled":false,"hidden":false},{"id":"b2ffbd2f.f16","type":"ui_group","z":"","name":"Distancia","tab":"acbb5738.a5c768","order":1,"disp":true,"width":"6","collapse":false},{"id":"33ff6b31.ddfab4","type":"ui_base","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","reset":false},"themeState":{"base-color":{"default":"#0094CE","value":"#0094CE","edited":false},"page-titlebar-backgroundColor":{"value":"#0094CE","edited":false},"page-backgroundColor":{"value":"#fafafa","edited":false},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#1bbfff","edited":false},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#0094ce","edited":false},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"b6a7ed60.c43ed","type":"ui_group","z":"","name":"Diagnostic Module","tab":"acbb5738.a5c768","order":2,"disp":true,"width":"6","collapse":false},{"id":"1be61452.e098bc","type":"ui_group","z":"","name":"Blinking LED","tab":"7ab85675.dd7e78","order":1,"disp":true,"width":"6"},{"id":"7ab85675.dd7e78","type":"ui_tab","z":"","name":"Blinking LED","icon":"dashboard"},{"id":"b08bfb29.d1d6f8","type":"ui_spacer","name":"spacer","group":"b6a7ed60.c43ed","order":5,"width":1,"height":1},{"id":"e75d6c55.0e0a","type":"ui_group","z":"","name":"Diagnostic Process","tab":"acbb5738.a5c768","order":3,"disp":true,"width":"6","collapse":true},{"id":"7b1ceeb1.85093","type":"ui_group","z":"","name":"Dynamic device gauge Picker","tab":"78d175d0.6cfcbc","order":2,"disp":true,"width":"6","collapse":false},{"id":"78d175d0.6cfcbc","type":"ui_tab","name":"Tab 3","icon":"dashboard","order":1},{"id":"9d7f4812.ef1c68","type":"inject","z":"a35ac5c2.83bca8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":200,"y":160,"wires":[["b06b7d36.3faf6"]]},{"id":"b06b7d36.3faf6","type":"http request","z":"a35ac5c2.83bca8","name":"http request (Devices Properties)","method":"GET","ret":"obj","paytoqs":false,"url":"192.168.0.10/dprop.jsn","tls":"","persist":false,"proxy":"","authType":"","x":460,"y":160,"wires":[["2142f7c1.0cf398","230a28aa.f89778"]]},{"id":"2142f7c1.0cf398","type":"debug","z":"a35ac5c2.83bca8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":770,"y":160,"wires":[]},{"id":"ad876b85.19b918","type":"debug","z":"a35ac5c2.83bca8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1018,"y":220,"wires":[]},{"id":"230a28aa.f89778","type":"function","z":"a35ac5c2.83bca8","name":"function","func":"BTL={};\nvar aux = (msg.payload[5].ProcessInputs).replace(/\\s/g,\"\"); //eliminamos los espacios en blanco\nBTL.payload = parseInt(aux.slice(0,8),16)/1000; //dejamos los primeros 4 caracteres, convertimos a numero y dividimos por 1000 para tener la distancia en mm\nreturn BTL;","outputs":1,"noerr":0,"x":760,"y":220,"wires":[["ad876b85.19b918","a6c6e119.bf578","7c517655.19dcb8","58e4a0c7.df347"]]},{"id":"7c517655.19dcb8","type":"ui_gauge","z":"a35ac5c2.83bca8","name":"","group":"b2ffbd2f.f16","order":1,"width":0,"height":0,"gtype":"gage","title":"Distancia","label":"mm","format":"{{value}}","min":0,"max":"175","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1008,"y":300,"wires":[]},{"id":"a6c6e119.bf578","type":"ui_text","z":"a35ac5c2.83bca8","group":"b2ffbd2f.f16","order":0,"width":0,"height":0,"name":"","label":"Distancia","format":"{{msg.payload}}","layout":"row-spread","x":1008,"y":260,"wires":[]},{"id":"58e4a0c7.df347","type":"ui_slider","z":"a35ac5c2.83bca8","name":"","label":"Distancia","tooltip":"","group":"b2ffbd2f.f16","order":2,"width":0,"height":0,"passthru":true,"outs":"all","topic":"","min":0,"max":"175","step":1,"x":1008,"y":340,"wires":[[]]},{"id":"631f297c.ed8078","type":"inject","z":"a35ac5c2.83bca8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":200,"y":520,"wires":[["8dc462f8.ea475"]]},{"id":"8dc462f8.ea475","type":"http request","z":"a35ac5c2.83bca8","name":"http request (Diagnostic Module)","method":"GET","ret":"obj","paytoqs":false,"url":"192.168.0.10/diag_mod.jsn","tls":"","persist":false,"proxy":"","authType":"","x":450,"y":520,"wires":[["9ff6f7af.05a978","d6b77143.9f4b2"]]},{"id":"ef994e9a.80f86","type":"inject","z":"a35ac5c2.83bca8","name":"","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":210,"y":960,"wires":[["9bb77f66.cb9a9"]]},{"id":"c71d8c81.87773","type":"debug","z":"a35ac5c2.83bca8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":770,"y":960,"wires":[]},{"id":"9bb77f66.cb9a9","type":"http request","z":"a35ac5c2.83bca8","name":"http request (Diagnostic Process)","method":"GET","ret":"obj","paytoqs":false,"url":"192.168.0.10/diag.jsn","tls":"","persist":false,"proxy":"","authType":"","x":460,"y":960,"wires":[["c71d8c81.87773","675f6b75.366a84"]]},{"id":"9052e008.03c8c","type":"comment","z":"a35ac5c2.83bca8","name":"Esto se utiliza con una BNI008Z que tiene un FW 3.6. En las BNI mas nuevas los end point son diferentes.","info":"","x":460,"y":60,"wires":[]},{"id":"9ff6f7af.05a978","type":"debug","z":"a35ac5c2.83bca8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":770,"y":520,"wires":[]},{"id":"bcf20d8d.00db1","type":"ui_led","z":"a35ac5c2.83bca8","group":"b6a7ed60.c43ed","order":2,"width":0,"height":0,"label":"UA (\tActuator Supply)","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"Led UA","x":1200,"y":620,"wires":[]},{"id":"d6b77143.9f4b2","type":"function","z":"a35ac5c2.83bca8","name":"function","func":"// \n\nvar msg1 = {payload: msg.payload[0].US};\nvar msg2 = {payload: msg.payload[0].UA};\nvar msg3 = {payload: msg.payload[0].MODST};\nvar msg4 = {payload: msg.payload[0].NETST};\nvar msg5 = {payload: msg.payload[0].linkSpeed0};\nvar msg6 = {payload: msg.payload[0].linkSpeed1};\n\nreturn [msg1, msg2, msg3, msg4, msg5, msg6];","outputs":6,"noerr":0,"x":760,"y":600,"wires":[["1e205bba.2209f4"],["2001430a.eec29c"],["55d612a5.cdf84c"],["a9293bba.537898"],["64c48e3.4d4887"],["79dacde9.4065b4"]]},{"id":"f9c72548.d70fc8","type":"function","z":"45d2621c.56598c","name":"function","func":"var aux = msg.payload\n\nif (aux == \"gnst\"){    //verde fijo\n    msg.payload = true; \n    node.send(msg);}\n    \nelse if (aux == \"rdst\"){    //rojo fijo\n    msg.payload = false; \n    node.send(msg);}\n    \nelse if (aux == \"gnfl\"){     //verde parpadeante\n    setTimeout(function(){\n    msg.payload = true;\n    node.send(msg);\n    }, 500);\n\n    msg.payload = \"\";\n    node.send (msg);}\nelse if (aux == \"rdfl\"){     //rojo parpadeante\n    setTimeout(function(){\n    msg.payload = true;\n    node.send(msg);\n    }, 500);\n\n    msg.payload = \"\";\n    node.send (msg);}","outputs":1,"noerr":0,"x":200,"y":80,"wires":[[]]},{"id":"68e38736.0e9b08","type":"ui_led","z":"a35ac5c2.83bca8","group":"b6a7ed60.c43ed","order":4,"width":0,"height":0,"label":"NET (Network Status)","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"Led NET","x":1200,"y":700,"wires":[]},{"id":"eeda5876.dce978","type":"ui_led","z":"a35ac5c2.83bca8","group":"b6a7ed60.c43ed","order":1,"width":0,"height":0,"label":"US (Sensor and Module Supply)","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"Led US","x":1200,"y":580,"wires":[]},{"id":"242c91b4.fcfe9e","type":"ui_led","z":"a35ac5c2.83bca8","group":"b6a7ed60.c43ed","order":3,"width":0,"height":0,"label":"MOD (Module Status)","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"Led MOD","x":1200,"y":660,"wires":[]},{"id":"1e205bba.2209f4","type":"subflow:45d2621c.56598c","z":"a35ac5c2.83bca8","name":"Color status Led","env":[],"x":1020,"y":580,"wires":[["eeda5876.dce978"]]},{"id":"cf829d8.5be836","type":"trigger","z":"1f8d397e.070a67","op1":"true","op2":"0","op1type":"bool","op2type":"str","duration":"500","extend":false,"units":"ms","reset":"","bytopic":"all","name":"","x":340,"y":60,"wires":[["9cf3ea47.5d0908"]]},{"id":"b3776200.e7e2e","type":"inject","z":"1f8d397e.070a67","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":"1","x":140,"y":60,"wires":[["cf829d8.5be836"]]},{"id":"5ab9e1f.dd5e32","type":"ui_led","z":"a35ac5c2.83bca8","group":"b6a7ed60.c43ed","order":6,"width":0,"height":0,"label":"100 (Link Speed 1)","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"orange","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"Led 100","x":1200,"y":740,"wires":[]},{"id":"834cf2c1.a315b","type":"ui_led","z":"a35ac5c2.83bca8","group":"b6a7ed60.c43ed","order":7,"width":0,"height":0,"label":"LK1 (Link Activity 1)","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"green","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"Led LK1","x":1200,"y":780,"wires":[]},{"id":"2001430a.eec29c","type":"subflow:45d2621c.56598c","z":"a35ac5c2.83bca8","name":"Color status Led","env":[],"x":1020,"y":620,"wires":[["bcf20d8d.00db1"]]},{"id":"55d612a5.cdf84c","type":"subflow:45d2621c.56598c","z":"a35ac5c2.83bca8","name":"Color status Led","env":[],"x":1020,"y":660,"wires":[["242c91b4.fcfe9e"]]},{"id":"a9293bba.537898","type":"subflow:45d2621c.56598c","z":"a35ac5c2.83bca8","name":"Color status Led","env":[],"x":1020,"y":700,"wires":[["68e38736.0e9b08"]]},{"id":"690a016d.9660e","type":"function","z":"51d99cff.543894","name":"function","func":"var aux = msg.payload\n\nif (aux == \" \"){    \n    msg1 = {payload: false};   //ambos leds apagados\n    msg2 = {payload: false};\n    node.send([msg1, msg2]);}  \n    \nelse if (aux == \"100 Mbit/s FULL\"){    \n    msg1 = {payload: true};   //naranja fijo\n    msg2 = {payload: true};    //verde fijo\n    node.send([msg1, msg2]);}\n    \nelse if (aux == \"10 Mbit/s FULL\"){    \n    msg1 = {payload: false};   //apagado\n    msg2 = {payload: true};    //verde fijo\n    node.send([msg1, msg2]);}     \n\n\n    ","outputs":1,"noerr":0,"x":300,"y":40,"wires":[[]]},{"id":"64c48e3.4d4887","type":"subflow:51d99cff.543894","z":"a35ac5c2.83bca8","name":"","env":[],"x":1020,"y":740,"wires":[["5ab9e1f.dd5e32"],["834cf2c1.a315b"]]},{"id":"f6f866c6.d0eeb8","type":"ui_led","z":"a35ac5c2.83bca8","group":"b6a7ed60.c43ed","order":8,"width":0,"height":0,"label":"100 (Link Speed 2)","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"orange","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"Led 100","x":1200,"y":820,"wires":[]},{"id":"7b7fcdb8.4f8304","type":"ui_led","z":"a35ac5c2.83bca8","group":"b6a7ed60.c43ed","order":9,"width":0,"height":0,"label":"LK2 (Link Activity 2)","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"green","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"Led LK2","x":1200,"y":860,"wires":[]},{"id":"79dacde9.4065b4","type":"subflow:51d99cff.543894","z":"a35ac5c2.83bca8","name":"","env":[],"x":1020,"y":820,"wires":[["f6f866c6.d0eeb8"],["7b7fcdb8.4f8304"]]},{"id":"9cf3ea47.5d0908","type":"ui_led","z":"1f8d397e.070a67","d":true,"group":"1be61452.e098bc","order":10,"width":0,"height":0,"label":"Test","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"","x":530,"y":60,"wires":[]},{"id":"3b721312.b7fc2c","type":"ui_dropdown","z":"a35ac5c2.83bca8","name":"","label":"Puerto","tooltip":"","place":"Select option","group":"e75d6c55.0e0a","order":1,"width":0,"height":0,"passthru":true,"multiple":false,"options":[{"label":"Puerto 0","value":0,"type":"num"},{"label":"Puerto 1","value":1,"type":"num"},{"label":"Puerto 2","value":2,"type":"num"},{"label":"Puerto 3","value":3,"type":"num"},{"label":"Puerto 4","value":4,"type":"num"},{"label":"Puerto 5","value":5,"type":"num"},{"label":"Puerto 6","value":6,"type":"num"},{"label":"Puerto 7","value":7,"type":"num"}],"payload":"","topic":"","x":190,"y":1140,"wires":[["f6f5a871.752e78"]]},{"id":"d9ec21b4.698a4","type":"inject","z":"e43f33ee.77fc6","name":"Device 1","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":300,"wires":[["ae86772e.6b7118"]]},{"id":"aed9e820.1affa8","type":"inject","z":"e43f33ee.77fc6","name":"Device 2","topic":"","payload":"","payloadType":"date","repeat":"2","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":340,"wires":[["afed1699.ee4b38"]]},{"id":"5c745e57.26e43","type":"inject","z":"e43f33ee.77fc6","name":"Device 3","topic":"","payload":"","payloadType":"date","repeat":"3","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":380,"wires":[["35d5ee6a.474892"]]},{"id":"c5f7c66e.ee1af8","type":"change","z":"e43f33ee.77fc6","name":"topic = \"device1\"","rules":[{"t":"set","p":"topic","pt":"msg","to":"device1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":300,"wires":[["d9ecba12.fa5948"]]},{"id":"1a027b07.e95d15","type":"change","z":"e43f33ee.77fc6","name":"topic = \"device2\"","rules":[{"t":"set","p":"topic","pt":"msg","to":"device2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":340,"wires":[["d9ecba12.fa5948"]]},{"id":"ca6a5e2b.74af1","type":"change","z":"e43f33ee.77fc6","name":"topic = \"device3\"","rules":[{"t":"set","p":"topic","pt":"msg","to":"device3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":380,"wires":[["d9ecba12.fa5948"]]},{"id":"4f322f3f.6591f","type":"ui_dropdown","z":"e43f33ee.77fc6","name":"","label":"","tooltip":"","place":"Select option","group":"7b1ceeb1.85093","order":2,"width":0,"height":0,"passthru":true,"options":[{"label":"Device 1","value":"device1","type":"str"},{"label":"Device 2","value":"device2","type":"str"},{"label":"Device 3","value":"device3","type":"str"}],"payload":"","topic":"","x":110,"y":480,"wires":[["bd26f271.405cc"]]},{"id":"bd26f271.405cc","type":"change","z":"e43f33ee.77fc6","name":"topic = msg.payload","rules":[{"t":"set","p":"device","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":304,"y":479,"wires":[[]]},{"id":"6da0033f.fbae9c","type":"ui_gauge","z":"e43f33ee.77fc6","name":"","group":"7b1ceeb1.85093","order":1,"width":0,"height":0,"gtype":"gage","title":"{{msg.topic}}","label":"units","format":"{{value}}","min":0,"max":"30","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":930,"y":340,"wires":[]},{"id":"d9ecba12.fa5948","type":"switch","z":"e43f33ee.77fc6","name":"","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"device","vt":"flow"},{"t":"eq","v":"device","vt":"flow"},{"t":"eq","v":"device","vt":"flow"}],"checkall":"true","repair":false,"outputs":3,"x":650,"y":340,"wires":[["6da0033f.fbae9c","4da40c27.516704"],["6da0033f.fbae9c","742e9c16.1c5e74"],["6da0033f.fbae9c","2ac53ad6.de2f66"]]},{"id":"15e2bf44.46d631","type":"inject","z":"e43f33ee.77fc6","name":"initilize the flow variable \"device\"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":200,"y":220,"wires":[["5423df31.0754e"]]},{"id":"5423df31.0754e","type":"change","z":"e43f33ee.77fc6","name":"topic = \"device1\"","rules":[{"t":"set","p":"device","pt":"flow","to":"device1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":220,"wires":[[]]},{"id":"2ac53ad6.de2f66","type":"debug","z":"e43f33ee.77fc6","name":"DEBUG: Device 3","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":730,"y":500,"wires":[]},{"id":"742e9c16.1c5e74","type":"debug","z":"e43f33ee.77fc6","name":"DEBUG: Device 2","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":730,"y":460,"wires":[]},{"id":"4da40c27.516704","type":"debug","z":"e43f33ee.77fc6","name":"DEBUG: Device 1","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":730,"y":420,"wires":[]},{"id":"5a2335.c4d37ccc","type":"comment","z":"e43f33ee.77fc6","name":"initilize flow variable at deploy","info":"","x":160,"y":180,"wires":[]},{"id":"4993acf8.ef6314","type":"comment","z":"e43f33ee.77fc6","name":"This section simulates data coming from three devices","info":"","x":240,"y":260,"wires":[]},{"id":"8943fd81.8b697","type":"comment","z":"e43f33ee.77fc6","name":"the switch determines which data goes to the gauge","info":"","x":790,"y":300,"wires":[]},{"id":"1662f84.6ad7308","type":"comment","z":"e43f33ee.77fc6","name":"Dropdown to pick device to monitor","info":"","x":180,"y":440,"wires":[]},{"id":"608c1fd1.f2876","type":"comment","z":"e43f33ee.77fc6","name":"This flow demonstrate how three devices could send data to a single gauge","info":"","x":310,"y":40,"wires":[]},{"id":"98277bf4.02cf18","type":"comment","z":"e43f33ee.77fc6","name":"The devices send random data in groups to trigger the gauge's color","info":"","x":280,"y":80,"wires":[]},{"id":"2911f2.03ea2e0e","type":"comment","z":"e43f33ee.77fc6","name":"Device 1 : 1-10 (green) - Device 2 : 11-20 (yellow) - Device 3 : 21-30 (red)","info":"","x":300,"y":120,"wires":[]},{"id":"ae86772e.6b7118","type":"random","z":"e43f33ee.77fc6","name":"random  1-10","low":"1","high":"10","inte":"true","property":"payload","x":270,"y":300,"wires":[["c5f7c66e.ee1af8"]]},{"id":"afed1699.ee4b38","type":"random","z":"e43f33ee.77fc6","name":"random 11-20","low":"11","high":"20","inte":"true","property":"payload","x":280,"y":340,"wires":[["1a027b07.e95d15"]]},{"id":"35d5ee6a.474892","type":"random","z":"e43f33ee.77fc6","name":"random 21-30","low":"21","high":"30","inte":"true","property":"payload","x":280,"y":380,"wires":[["ca6a5e2b.74af1"]]},{"id":"f6f5a871.752e78","type":"change","z":"a35ac5c2.83bca8","name":"","rules":[{"t":"set","p":"Puerto","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":1140,"wires":[[]]},{"id":"6d3c91e8.6273b","type":"function","z":"a35ac5c2.83bca8","name":"","func":"var msg1 = {payload: flow.get(\"Puerto\")};\nreturn msg1;","outputs":1,"noerr":0,"x":550,"y":1560,"wires":[["e034843a.b202e8"]]},{"id":"e034843a.b202e8","type":"debug","z":"a35ac5c2.83bca8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":790,"y":1560,"wires":[]},{"id":"d99e3e2b.d793a","type":"inject","z":"a35ac5c2.83bca8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":260,"y":1560,"wires":[["6d3c91e8.6273b"]]},{"id":"675f6b75.366a84","type":"function","z":"a35ac5c2.83bca8","name":"function","func":"//var Puerto = {payload: parseInt(flow.get(\"Puerto\"))}; //para pasar de texto a numero\n//var Puerto = {payload: (flow.get(\"Puerto\")).toString()};  //para pasar de numero a texto\n\n//Genera los dos digitos de los indices a leer\nvar nroLed1 = ((flow.get(\"Puerto\")*2).toString()).padStart(2,\"0\");\nvar nroLed2 = (((flow.get(\"Puerto\")*2)+1).toString()).padStart(2,\"0\");\n\n\n//Genera el texto de los indices\nvar p__Led1 = \"p\"+nroLed1+\"Led\";   \nvar p__Led2 = \"p\"+nroLed2+\"Led\";\nvar p__ProductName = \"p\"+nroLed1+\"ProductName\"\nvar p__VendorName = \"p\"+nroLed1+\"VendorName\"\nvar p__Status = \"p\"+nroLed1+\"Status\"\nvar p__DirectParam = \"p\"+nroLed1+\"DirectParam\"\n\nvar Led1 = {payload: msg.payload[0][p__Led1]};\nvar Led2 = {payload: msg.payload[0][p__Led2]};\nvar ProductName = {payload: msg.payload[0][p__ProductName]};\nvar VendorName = {payload: msg.payload[0][p__VendorName]};\nvar Status = {payload: msg.payload[0][p__Status]};\nvar DirectParam = {payload: msg.payload[0][p__DirectParam]};\n\nreturn [Led1, Led2, ProductName, VendorName, Status, DirectParam];\n","outputs":6,"noerr":0,"x":760,"y":1040,"wires":[["d3c90f9c.b9cc"],["1485fdab.21e692"],["2e1bbab8.b7c896"],["2e7be926.b8cc86"],["c2c0ae40.ad136"],["a41f45e1.9f6de8"]]},{"id":"c2c0ae40.ad136","type":"debug","z":"a35ac5c2.83bca8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1010,"y":1180,"wires":[]},{"id":"a41f45e1.9f6de8","type":"debug","z":"a35ac5c2.83bca8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1010,"y":1220,"wires":[]},{"id":"b4cbac57.2869c","type":"function","z":"67e78992.40b628","name":"function","func":"var aux = msg.payload\n\nif (aux == \"gnst\"){    //verde fijo\n    msg.payload = true; \n    node.send(msg);}\n    \nelse if (aux == \"rdst\"){    //rojo fijo\n    msg.payload = false; \n    node.send(msg);}\n    \nelse if (aux == \"gnfl\"){     //verde parpadeante\n    setTimeout(function(){\n    msg.payload = true;\n    node.send(msg);\n    }, 500);\n\n    msg.payload = \"\";\n    node.send (msg);}\nelse if (aux == \"rdfl\"){     //rojo parpadeante\n    setTimeout(function(){\n    msg.payload = true;\n    node.send(msg);\n    }, 500);\n\n    msg.payload = \"\";\n    node.send (msg);}\n    \nelse if (aux == \"bkst\"){    //apagado\n    msg.payload = \"\"; \n    node.send(msg);}","outputs":1,"noerr":0,"x":220,"y":60,"wires":[[]]},{"id":"d3c90f9c.b9cc","type":"subflow:67e78992.40b628","z":"a35ac5c2.83bca8","name":"","x":1010,"y":1020,"wires":[["b4fbe8c7.b206f8"]]},{"id":"1485fdab.21e692","type":"subflow:67e78992.40b628","z":"a35ac5c2.83bca8","name":"","x":1010,"y":1060,"wires":[["ad3ecbb4.648fc8"]]},{"id":"b4fbe8c7.b206f8","type":"ui_led","z":"a35ac5c2.83bca8","group":"e75d6c55.0e0a","order":4,"width":0,"height":0,"label":"","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"Led 1","x":1190,"y":1020,"wires":[]},{"id":"ad3ecbb4.648fc8","type":"ui_led","z":"a35ac5c2.83bca8","group":"e75d6c55.0e0a","order":5,"width":0,"height":0,"label":"","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"Led 2","x":1190,"y":1060,"wires":[]},{"id":"2e1bbab8.b7c896","type":"ui_text","z":"a35ac5c2.83bca8","group":"e75d6c55.0e0a","order":2,"width":0,"height":0,"name":"Product Name","label":"Product","format":"{{msg.payload}}","layout":"row-spread","x":1020,"y":1100,"wires":[]},{"id":"2e7be926.b8cc86","type":"ui_text","z":"a35ac5c2.83bca8","group":"e75d6c55.0e0a","order":3,"width":0,"height":0,"name":"Vendor Name","label":"Vendor","format":"{{msg.payload}}","layout":"row-spread","x":1020,"y":1140,"wires":[]}]